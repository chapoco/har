<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>개노답 하렘 다크 판타지</title>
    <link rel="icon" type="image/png" href="img/웹로고.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Nanum+Myeongjo:wght@400;700;800&family=Noto+Serif+KR:wght@500;700&display=swap"
        rel="stylesheet">

    <!-- CSS (Responsive Loading) -->
    <!-- Desktop Styles (769px and up) -->
    <link rel="stylesheet" href="style.css" media="(min-width: 769px)">
    <!-- Mobile Styles (768px and down) -->
    <link rel="stylesheet" href="mobile-style.css" media="(max-width: 768px)">

    <!-- View Switcher Logic -->
    <style>
        /* Default: Show Desktop, Hide Mobile */
        #mobile-view {
            display: none;
        }

        #desktop-view {
            display: block;
        }

        /* Mobile Breakpoint */
        @media (max-width: 768px) {
            #desktop-view {
                display: none;
            }

            #mobile-view {
                display: block;
            }

            /* Reset body for mobile */
            body {
                width: 100%;
                height: 100vh;
                margin: 0;
                padding: 0;
                overflow: hidden;
            }
        }
    </style>
</head>

<body>
    <!-- ==========================================
         DESKTOP VIEW (≥ 769px)
         ========================================== -->
    <div id="desktop-view">
        <div class="main-container">
            <!-- Content Area -->
            <div class="party-content">
                <!-- Top Title Image -->
                <img class="page-title-img" src="img/파티원.png" alt="Page Title" />

                <!-- Character Cards -->
                <div class="char-card pos-1">
                    <img class="char-img" src="img/브라카.png" alt="Character" />
                    <div class="char-tag-wrapper">
                        <div class="char-tag">팔씨름 챔피언 / 24세 / ESTP</div>
                    </div>
                    <div class="char-name">브라카</div>
                    <div class="char-desc">든든하고 호탕한 돌머리 전사입니다. 단순한 임무도, 복잡한 임무도 문제 없죠. 전부 통째로 박살내 버리면 그만이니까요.</div>
                    <div class="char-quote-box">
                        <div class="char-quote"><i>"뭐, 싸우자고? 지금 플러팅하는 거냐?"</i></div>
                    </div>
                </div>

                <div class="char-card pos-2">
                    <img class="char-img" src="img/미유.png" alt="Character" />
                    <div class="char-tag-wrapper">
                        <div class="char-tag">벨루즈의 골칫덩이 / 20세 / ESFP</div>
                    </div>
                    <div class="char-name">미유</div>
                    <div class="char-desc">벨루즈 가문에서 버림받은 비운의 영애입니다. 뭐, 사실 어느 집안에서 태어났더라도 내다 버리고 싶은 성질머리입니다.</div>
                    <div class="char-quote-box">
                        <div class="char-quote">“이 그지 같은 새끼는 또 뭐야? 나한테 동냥이라도 하러 온 거야?”</div>
                    </div>
                </div>

                <div class="char-card pos-3">
                    <img class="char-img" src="img/에르벨.png" alt="Character" />
                    <div class="char-tag-wrapper">
                        <div class="char-tag">잡지식계의 대현자 / 22세 / INTP</div>
                    </div>
                    <div class="char-name">에르벨</div>
                    <div class="char-desc">세계 최강의 두뇌를 가진 학자입니다. 그 분야가 '아르케논의 천 가지 알쓸신잡' 같은 종류긴 하지만 말이죠.</div>
                    <div class="char-quote-box">
                        <div class="char-quote">“여기선 최소한의 각도로 몸을 틀어 회피하는 게 효율적... 어라?”</div>
                    </div>
                </div>

                <div class="char-card pos-4">
                    <img class="char-img" src="img/이르마.png" alt="Character" />
                    <div class="char-tag-wrapper">
                        <div class="char-tag">마왕 다음 가는 음침함 / 26세 / ISFJ</div>
                    </div>
                    <div class="char-name">이르마</div>
                    <div class="char-desc">음침하고 소심한 겁쟁이지만 상당한 잠재 마력을 지녔습니다. 그 마력의 저장소가 어디인지는 대충 알 것 같군요.</div>
                    <div class="char-quote-box">
                        <div class="char-quote">“ㅁ, 마, 마마마마 마왕을요? 제, 제가요...?!”</div>
                    </div>
                </div>
            </div>

            <!-- Header -->
            <script src="header.js"></script>
            <script>renderHeader('job');</script>

            <!-- Popup Overlay (Hidden by default) -->
            <div class="popup-overlay" id="partyPopup">
                <div class="popup-content">
                    <img class="popup-main-img" src="https://placehold.co/404x590" alt="Detail" />
                    <div class="popup-name">이름</div>
                    <div class="popup-info">직업 / 나이 / 성향</div>
                    <div class="popup-desc">캐릭터 설명 1째줄<br />캐릭터 설명 2째줄<br />캐릭터 설명 3째줄<br />캐릭터 설명 4째줄</div>

                    <img class="popup-gallery-img g-1" src="https://placehold.co/210x143" />
                    <img class="popup-gallery-img g-2" src="https://placehold.co/210x143" />
                    <img class="popup-gallery-img g-3" src="https://placehold.co/210x143" />

                    <img class="popup-icon i-1" src="https://placehold.co/48x48" />
                    <img class="popup-icon i-2" src="https://placehold.co/48x48" />
                    <img class="popup-icon i-3" src="https://placehold.co/48x48" />
                    <img class="popup-icon i-4" src="https://placehold.co/48x48" />
                    <img class="popup-icon i-5" src="https://placehold.co/48x48" />
                    <img class="popup-icon i-6" src="https://placehold.co/48x48" />
                    <img class="popup-icon i-7" src="https://placehold.co/48x48" />
                    <img class="popup-icon i-8" src="https://placehold.co/48x48" />
                </div>
            </div>

            <!-- Second Popup (Image View) -->
            <div class="image-popup-overlay" id="imagePopup">
                <img class="large-view-img" src="" alt="Large View" id="largeViewImg" />
            </div>

            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    // Desktop Guard
                    if (window.innerWidth <= 768) return;

                    const partyPopup = document.getElementById('partyPopup');
                    const imagePopup = document.getElementById('imagePopup');
                    const largeViewImg = document.getElementById('largeViewImg');
                    const cards = document.querySelectorAll('.char-card');
                    const galleryImages = document.querySelectorAll('.popup-gallery-img');

                    // Popup Elements to Update
                    const popupMainImg = partyPopup.querySelector('.popup-main-img');
                    const popupName = partyPopup.querySelector('.popup-name');
                    const popupInfo = partyPopup.querySelector('.popup-info');
                    const popupDesc = partyPopup.querySelector('.popup-desc');

                    // 1. Open Party Popup with Dynamic Content
                    cards.forEach(card => {
                        card.addEventListener('click', () => {
                            const name = card.querySelector('.char-name').textContent;
                            const info = card.querySelector('.char-tag').textContent;
                            // const desc = card.querySelector('.char-desc').innerHTML; 
                            const img = card.querySelector('.char-img').src;

                            // Update Popup Content
                            popupName.textContent = name;
                            popupInfo.textContent = info;
                            popupMainImg.src = img;

                            partyPopup.classList.add('active');
                        });
                    });

                    // 2. Open Image Popup
                    galleryImages.forEach(img => {
                        img.addEventListener('click', (e) => {
                            e.stopPropagation();
                            largeViewImg.src = img.src;
                            imagePopup.classList.add('active');
                        });
                    });

                    // 3. Close Image Popup
                    imagePopup.addEventListener('click', (e) => {
                        if (e.target === imagePopup || e.target === largeViewImg) {
                            imagePopup.classList.remove('active');
                        }
                    });

                    // 4. Close Party Popup
                    partyPopup.addEventListener('click', (e) => {
                        if (e.target === partyPopup) {
                            partyPopup.classList.remove('active');
                        }
                    });

                    // 5. Icon Button Functionality
                    const iconButtons = partyPopup.querySelectorAll('.popup-icon');

                    iconButtons.forEach((btn, index) => {
                        btn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            // Visual feedback
                            iconButtons.forEach(b => b.style.opacity = '0.5');
                            btn.style.opacity = '1';

                            // Note: Add logic here to switch content based on the icon (index)
                            // Example: 
                            // if (index === 0) { popupMainImg.src = '...'; }
                        });
                    });
                });
            </script>
        </div>
    </div>

    <!-- ==========================================
         MOBILE VIEW (≤ 768px)
         ========================================== -->
    <div id="mobile-view">
        <!-- Header -->
        <header class="mobile-header">
            <a href="index.html">
                <img class="mobile-logo" src="img/로고.png" alt="Logo">
            </a>
            <div class="mobile-menu-icon" id="mobile-menu-btn">
                <div class="menu-icon-inner">
                    <div class="menu-bars"></div>
                </div>
            </div>
        </header>

        <!-- Mobile Navigation Overlay (Shared Component) -->
        <div class="mobile-nav-overlay" id="mobile-nav">
            <div class="mobile-nav-content">
                <a href="party.html" class="mobile-nav-item" style="color: #c5a059;">파티원</a>
                <a href="key figures.html" class="mobile-nav-item">주요인물</a>
                <a href="faction.html" class="mobile-nav-item">세력</a>
                <a href="monster.html" class="mobile-nav-item">몬스터</a>
                <img class="mobile-nav-play-btn" src="img/플레이.png" alt="Game Start"
                    onclick="window.open('https://share.crack.wrtn.ai/v3snwy', '_blank')" />
            </div>
        </div>

        <!-- Content Wrapper -->
        <div class="party-wrapper">
            <!-- Card 1: Braca -->
            <div class="party-card" data-name="브라카" data-info="팔씨름 챔피언 / 24세 / ESTP"
                data-desc="든든하고 호탕한 돌머리 전사입니다. 단순한 임무도, 복잡한 임무도 문제 없죠. 전부 통째로 박살내 버리면 그만이니까요.">
                <img class="party-card-img" src="img/브라카.png" alt="브라카">
                <div class="party-tag-wrapper">
                    <div class="party-tag">팔씨름 챔피언 / 24세 / ESTP</div>
                </div>
                <div class="party-name">브라카</div>
                <div class="party-desc">든든하고 호탕한 돌머리 전사입니다. 단순한 임무도, 복잡한 임무도 문제 없죠. 전부 통째로 박살내 버리면 그만이니까요.</div>
            </div>

            <!-- Card 2: Miyu -->
            <div class="party-card" data-name="미유" data-info="벨루즈의 골칫덩이 / 20세 / ESFP"
                data-desc="벨루즈 가문에서 버림받은 비운의 영애입니다. 뭐, 사실 어느 집안에서 태어났더라도 내다 버리고 싶은 성질머리입니다.">
                <img class="party-card-img" src="img/미유.png" alt="미유">
                <div class="party-tag-wrapper">
                    <div class="party-tag">벨루즈의 골칫덩이 / 20세 / ESFP</div>
                </div>
                <div class="party-name">미유</div>
                <div class="party-desc">벨루즈 가문에서 버림받은 비운의 영애입니다. 뭐, 사실 어느 집안에서 태어났더라도 내다 버리고 싶은 성질머리입니다.</div>
            </div>

            <!-- Card 3: Erbel -->
            <div class="party-card" data-name="에르벨" data-info="잡지식계의 대현자 / 22세 / INTP"
                data-desc="세계 최강의 두뇌를 가진 학자입니다. 그 분야가 '아르케논의 천 가지 알쓸신잡' 같은 종류긴 하지만 말이죠.">
                <img class="party-card-img" src="img/에르벨.png" alt="에르벨">
                <div class="party-tag-wrapper">
                    <div class="party-tag">잡지식계의 대현자 / 22세 / INTP</div>
                </div>
                <div class="party-name">에르벨</div>
                <div class="party-desc">세계 최강의 두뇌를 가진 학자입니다. 그 분야가 '아르케논의 천 가지 알쓸신잡' 같은 종류긴 하지만 말이죠.</div>
            </div>

            <!-- Card 4: Irma -->
            <div class="party-card" data-name="이르마" data-info="마왕 다음 가는 음침함 / 26세 / ISFJ"
                data-desc="음침하고 소심한 겁쟁이지만 상당한 잠재 마력을 지녔습니다. 그 마력의 저장소가 어디인지는 대충 알 것 같군요.">
                <img class="party-card-img" src="img/이르마.png" alt="이르마">
                <div class="party-tag-wrapper">
                    <div class="party-tag">마왕 다음 가는 음침함 / 26세 / ISFJ</div>
                </div>
                <div class="party-name">이르마</div>
                <div class="party-desc">음침하고 소심한 겁쟁이지만 상당한 잠재 마력을 지녔습니다. 그 마력의 저장소가 어디인지는 대충 알 것 같군요.</div>
            </div>
        </div>

        <!-- Mobile Popup Overlay -->
        <div class="popup-overlay-mobile" id="mobile-popup">
            <div class="popup-content-mobile">
                <div class="popup-name-mobile">이름</div>
                <div class="popup-info-mobile">정보</div>
                <div class="popup-desc-mobile">설명</div>

                <div class="popup-gallery-scroll">
                    <img class="popup-gallery-img-mobile" src="https://placehold.co/210x143" alt="Gallery 1">
                    <img class="popup-gallery-img-mobile" src="https://placehold.co/210x143" alt="Gallery 2">
                    <img class="popup-gallery-img-mobile" src="https://placehold.co/210x143" alt="Gallery 3">
                </div>
            </div>
        </div>

        <!-- Mobile Image Popup Overlay (2nd Depth) -->
        <div class="image-popup-overlay-mobile" id="mobile-image-popup">
            <img class="mobile-large-view-img" id="mobile-large-img" src="" alt="Large View" />
        </div>

        <script src="mobile-script.js"></script>
    </div>
</body>

</html>