<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>개노답 하렘 다크 판타지 - Key Figures</title>
    <link rel="icon" href="공통/파비콘.png" type="image/png">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>
        <nav class="desktop-nav">
            <a href="party.html" class="nav-item">Party</a>
            <a href="key%20figures.html" class="nav-item active">Key Figures</a>
            <a href="faction.html" class="nav-item">Factions</a>
            <a href="monster.html" class="nav-item">Monsters</a>
        </nav>

        <div class="header-logo desktop-logo">
            <a href="https://share.crack.wrtn.ai/v3snwy" target="_blank">
                <img src="공통/플레이.png" alt="Logo">
            </a>
        </div>

        <div class="mobile-header-elements">
            <button class="mobile-menu-btn" aria-label="Menu">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>
    </header>

    <div class="mobile-menu-overlay">
        <div class="mobile-menu-header">
            <button class="mobile-menu-close" aria-label="Close"></button>
        </div>
        <nav class="mobile-nav-links">
            <a href="party.html" class="mobile-nav-item">Party</a>
            <a href="key%20figures.html" class="mobile-nav-item">Key Figures</a>
            <a href="faction.html" class="mobile-nav-item">Factions</a>
            <a href="monster.html" class="mobile-nav-item">Monsters</a>
        </nav>
        <div class="mobile-menu-logo">
            <img src="공통/플레이.png" alt="Logo">
        </div>
    </div>

    <main>
        <div class="background-layer">
            <img class="bg-image" src="메인 페이지/배경.png" alt="Background">
            <div class="overlay"></div>
        </div>

        <div class="content-layer">
            <div class="party-container">
                <!-- Top Image (Key Figures Title) -->
                <img class="party-title-img" src="주요인물/주요인물.png" alt="Key Figures Title">

                <!-- Mobile Faction Tabs -->
                <div class="mobile-faction-tabs">
                    <button class="tab-btn active" data-target="church">교회</button>
                    <button class="tab-btn" data-target="royal">왕실</button>
                    <button class="tab-btn" data-target="platt">플랫</button>
                    <button class="tab-btn" data-target="hughes">휴즈</button>
                    <button class="tab-btn" data-target="belluz">벨루즈</button>
                </div>

                <!-- Grid of Figures -->
                <div class="figures-grid">
                    <!-- Row 1 -->
                    <!-- Church -->
                    <div class="figure-card" style="background-image: url('주요인물/보나.png');" data-name="보나"
                        data-tag="성녀 / 24세 / INFP" data-desc="교회의 실질적 리더입니다. 오늘은 다크서클이 무릎까지 내려왔군요."
                        data-bg="주요인물/보나.png" data-faction="church">
                        <div class="figure-gradient">
                            <div class="figure-name">보나</div>
                        </div>
                        <div class="mobile-info-overlay">
                            <div class="mobile-info-name">보나</div>
                            <div class="mobile-info-tag-container">
                                <div class="mobile-info-tag">성녀 / 24세 / INFP</div>
                            </div>
                            <div class="mobile-info-desc">교회의 실질적 리더입니다. 오늘은 다크서클이 무릎까지 내려왔군요.</div>
                        </div>
                    </div>

                    <!-- Royal -->
                    <div class="figure-card" style="background-image: url('주요인물/로데릭.png');" data-name="로데릭 5세"
                        data-tag="국왕 / 52세 / ISFJ" data-desc="아르케논 왕국의 국왕입니다. 일단은요." data-bg="주요인물/로데릭.png"
                        data-faction="royal">
                        <div class="figure-gradient">
                            <div class="figure-name">로데릭 5세</div>
                        </div>
                        <div class="mobile-info-overlay">
                            <div class="mobile-info-name">로데릭 5세</div>
                            <div class="mobile-info-tag-container">
                                <div class="mobile-info-tag">국왕 / 52세 / ISFJ</div>
                            </div>
                            <div class="mobile-info-desc">아르케논 왕국의 국왕입니다. 일단은요.</div>
                        </div>
                    </div>
                    <div class="figure-card" style="background-image: url('주요인물/알버트.png');" data-name="알버트"
                        data-tag="후작 / 38세 / ENTP" data-desc="고위 마법사이자 왕실의 후작입니다. 비극적이게도 로데릭이 가장 신뢰하는 신하이기도 하죠."
                        data-bg="주요인물/알버트.png" data-faction="royal">
                        <div class="figure-gradient">
                            <div class="figure-name">알버트</div>
                        </div>
                        <div class="mobile-info-overlay">
                            <div class="mobile-info-name">알버트</div>
                            <div class="mobile-info-tag-container">
                                <div class="mobile-info-tag">후작 / 38세 / ENTP</div>
                            </div>
                            <div class="mobile-info-desc">고위 마법사이자 왕실의 후작입니다. 비극적이게도 로데릭이 가장 신뢰하는 신하이기도 하죠.</div>
                        </div>
                    </div>
                    <div class="figure-card" style="background-image: url('주요인물/세레나.png');" data-name="세레나"
                        data-tag="왕녀 / 20세 / ENFP" data-desc="온실 속에 화초가 있다면 왕실엔 세레나 왕녀가 있습니다." data-bg="주요인물/세레나.png"
                        data-faction="royal">
                        <div class="figure-gradient">
                            <div class="figure-name">세레나</div>
                        </div>
                        <div class="mobile-info-overlay">
                            <div class="mobile-info-name">세레나</div>
                            <div class="mobile-info-tag-container">
                                <div class="mobile-info-tag">왕녀 / 20세 / ENFP</div>
                            </div>
                            <div class="mobile-info-desc">온실 속에 화초가 있다면 왕실엔 세레나 왕녀가 있습니다.</div>
                        </div>
                    </div>

                    <!-- Row 2 -->
                    <!-- Belluz -->
                    <div class="figure-card" style="background-image: url('주요인물/시즈카.png');" data-name="시즈카"
                        data-tag="벨루즈 가주 / 45세 / INTJ" data-desc="음, 남편은 어디 갔냐고요? 글쎄요." data-bg="주요인물/시즈카.png"
                        data-faction="belluz">
                        <div class="figure-gradient">
                            <div class="figure-name">시즈카</div>
                        </div>
                        <div class="mobile-info-overlay">
                            <div class="mobile-info-name">시즈카</div>
                            <div class="mobile-info-tag-container">
                                <div class="mobile-info-tag">벨루즈 가주 / 45세 / INTJ</div>
                            </div>
                            <div class="mobile-info-desc">음, 남편은 어디 갔냐고요? 글쎄요.</div>
                        </div>
                    </div>
                    <div class="figure-card" style="background-image: url('주요인물/네로.png');" data-name="네로"
                        data-tag="벨루즈 호위 메이드 / 21세 / ISTP" data-desc="시즈카의 곁에 24시간 붙어 호위합니다. 좀 부럽군요."
                        data-bg="주요인물/네로.png" data-faction="belluz">
                        <div class="figure-gradient">
                            <div class="figure-name">네로</div>
                        </div>
                        <div class="mobile-info-overlay">
                            <div class="mobile-info-name">네로</div>
                            <div class="mobile-info-tag-container">
                                <div class="mobile-info-tag">벨루즈 호위 메이드 / 21세 / ISTP</div>
                            </div>
                            <div class="mobile-info-desc">시즈카의 곁에 24시간 붙어 호위합니다. 좀 부럽군요.</div>
                        </div>
                    </div>

                    <!-- Hughes -->
                    <div class="figure-card" style="background-image: url('주요인물/카이라.png');" data-name="카이라"
                        data-tag="휴즈의 대장 / 32세 / ENTP" data-desc="그녀가 떴다 하면 우는 새끼 코로블린도 뚝 그칩니다. 발각되면 뚝배기가 터져 죽으니까요."
                        data-bg="주요인물/카이라.png" data-faction="hughes">
                        <div class="figure-gradient">
                            <div class="figure-name">카이라</div>
                        </div>
                        <div class="mobile-info-overlay">
                            <div class="mobile-info-name">카이라</div>
                            <div class="mobile-info-tag-container">
                                <div class="mobile-info-tag">휴즈의 대장 / 32세 / ENTP</div>
                            </div>
                            <div class="mobile-info-desc">그녀가 떴다 하면 우는 새끼 코로블린도 뚝 그칩니다. 발각되면 뚝배기가 터져 죽으니까요.</div>
                        </div>
                    </div>
                    <div class="figure-card" style="background-image: url('주요인물/론다.png');" data-name="론다"
                        data-tag="휴즈의 부대장 / 22세 / ISTJ" data-desc="카이라보다는 훨씬 얌전하지만 그녀의 워해머까지 그렇다고 확언하긴 힘들겠네요."
                        data-bg="주요인물/론다.png" data-faction="hughes">
                        <div class="figure-gradient">
                            <div class="figure-name">론다</div>
                        </div>
                        <div class="mobile-info-overlay">
                            <div class="mobile-info-name">론다</div>
                            <div class="mobile-info-tag-container">
                                <div class="mobile-info-tag">휴즈의 부대장 / 22세 / ISTJ</div>
                            </div>
                            <div class="mobile-info-desc">카이라보다는 훨씬 얌전하지만 그녀의 워해머까지 그렇다고 확언하긴 힘들겠네요.</div>
                        </div>
                    </div>

                    <!-- Row 3 -->
                    <!-- Platt -->
                    <div class="figure-card" style="background-image: url('주요인물/호야.png');" data-name="호야"
                        data-tag="플랫의 수장 / 22세 / ISTP" data-desc="어려운 자들을 돕는 데에 진심입니다. 물론 당신처럼 덜 어려운 자들의 주머니를 털어서요."
                        data-bg="주요인물/호야.png" data-faction="platt">
                        <div class="figure-gradient">
                            <div class="figure-name">호야</div>
                        </div>
                        <div class="mobile-info-overlay">
                            <div class="mobile-info-name">호야</div>
                            <div class="mobile-info-tag-container">
                                <div class="mobile-info-tag">플랫의 수장 / 22세 / ISTP</div>
                            </div>
                            <div class="mobile-info-desc">어려운 자들을 돕는 데에 진심입니다. 물론 당신처럼 덜 어려운 자들의 주머니를 털어서요.</div>
                        </div>
                    </div>
                    <div class="figure-card" style="background-image: url('주요인물/앵화.png');" data-name="앵화"
                        data-tag="플랫의 행동대장 / 21세 / ENTP" data-desc="눈이 오나 비가 오나 맑은 눈을 한 채 늘 웃고 다닙니다. 뭐... 귀엽긴 합니다."
                        data-bg="주요인물/앵화.png" data-faction="platt">
                        <div class="figure-gradient">
                            <div class="figure-name">앵화</div>
                        </div>
                        <div class="mobile-info-overlay">
                            <div class="mobile-info-name">앵화</div>
                            <div class="mobile-info-tag-container">
                                <div class="mobile-info-tag">플랫의 행동대장 / 21세 / ENTP</div>
                            </div>
                            <div class="mobile-info-desc">눈이 오나 비가 오나 맑은 눈을 한 채 늘 웃고 다닙니다. 뭐... 귀엽긴 합니다.</div>
                        </div>
                    </div>
                </div>

                <!-- Modal structure reused -->
                <div id="figure-modal" class="modal-overlay">
                    <div class="modal-content" id="modal-content-bg">
                        <!-- Close Button -->
                        <div class="modal-close" onclick="closeModal()"></div>

                        <!-- Gradient & Text -->
                        <div class="modal-gradient">
                            <div class="modal-name" id="modal-name">Character Name</div>
                            <div class="modal-tag">
                                <span class="modal-tag-text" id="modal-tag">Job / Age / MBTI</span>
                            </div>
                            <div class="modal-desc" id="modal-desc">
                                Character description goes here.
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <script>
        const menuBtn = document.querySelector('.mobile-menu-btn');
        const closeBtn = document.querySelector('.mobile-menu-close');
        const menuOverlay = document.querySelector('.mobile-menu-overlay');

        function toggleMenu() {
            menuOverlay.classList.toggle('active');
            document.body.style.overflow = menuOverlay.classList.contains('active') ? 'hidden' : '';
        }

        if (menuBtn) menuBtn.addEventListener('click', toggleMenu);
        if (closeBtn) closeBtn.addEventListener('click', toggleMenu);

        // Modal Elements
        const modal = document.getElementById('figure-modal');
        const modalContentBg = document.getElementById('modal-content-bg');
        const modalName = document.getElementById('modal-name');
        const modalTag = document.getElementById('modal-tag');
        const modalDesc = document.getElementById('modal-desc');
        const cards = document.querySelectorAll('.figure-card');
        const tabBtns = document.querySelectorAll('.tab-btn');

        // Tab Filtering Logic
        function filterFigures(faction) {
            cards.forEach(card => {
                if (faction === 'all' || card.getAttribute('data-faction') === faction) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all
                tabBtns.forEach(b => b.classList.remove('active'));
                // Add active to clicked
                btn.classList.add('active');

                // Filter
                const target = btn.getAttribute('data-target');
                filterFigures(target);
            });
        });

        // Image Swap & Layout Reset Logic
        function updateLayout() {
            const isMobile = window.innerWidth <= 768;

            cards.forEach(card => {
                const mobileSrc = card.getAttribute('data-bg');
                // We need to store the original background image url cleanly.
                // The style attribute has "url('...')"
                if (!card.dataset.thumb) {
                    // specific parsing might be needed if complex, but simple version:
                    card.dataset.thumb = card.style.backgroundImage;
                }

                if (isMobile) {
                    // Mobile: Use detailed bg and respect tabs
                    card.style.backgroundImage = `url('${mobileSrc}')`;

                    // Re-apply current tab filter if needed, or default to first tab if none active?
                    // But usually resize shouldn't reset state abruptly. 
                    // Let's ensure if we just switched TO mobile, we filter by active tab.
                    const activeTab = document.querySelector('.tab-btn.active');
                    if (activeTab) {
                        filterFigures(activeTab.getAttribute('data-target'));
                    }
                } else {
                    // Desktop: Use thumb and Show All
                    card.style.backgroundImage = card.dataset.thumb;
                    card.style.display = 'block'; // Always show all on desktop
                }
            });
        }

        window.addEventListener('load', updateLayout);
        window.addEventListener('resize', updateLayout);

        // Open Modal / Toggle Overlay
        cards.forEach(card => {
            card.addEventListener('click', (e) => {
                const isMobile = window.innerWidth <= 768;

                if (isMobile) {
                    // Mobile: Toggle active class for overlay
                    // Close others
                    cards.forEach(c => {
                        if (c !== card) c.classList.remove('active');
                    });
                    card.classList.toggle('active');
                } else {
                    // Desktop: Open Modal
                    const name = card.getAttribute('data-name');
                    const tag = card.getAttribute('data-tag');
                    const desc = card.getAttribute('data-desc');
                    const bg = card.getAttribute('data-bg');

                    modalName.textContent = name;
                    modalTag.textContent = tag;
                    modalDesc.textContent = desc;
                    modalContentBg.style.backgroundImage = `url('${bg}')`;

                    modal.classList.add('active');
                }
            });
        });

        // Close Modal
        function closeModal() {
            modal.classList.remove('active');
        }
    </script>
</body>

</html>